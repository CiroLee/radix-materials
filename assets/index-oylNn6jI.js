import{r as o,d as B,j as m,A as K,m as U}from"./index-DVJh4_k1.js";import{b as H,_ as T,$ as Y,a as N,f as q}from"./index-CmCUS2YP.js";import{a as W,$ as y}from"./index-BqrRrWwI.js";import{$ as j,a as X,b as z,c as J,d as Q,e as Z,f as ee}from"./index-DTZof9Vw.js";import{$ as te}from"./index-BKb5tYFp.js";import{$ as S}from"./index-DJeFikaz.js";const oe=o.forwardRef((e,n)=>o.createElement(H.span,T({},e,{ref:n,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}))),ne=oe,[O,Ge]=Y("Tooltip",[j]),R=j(),re="TooltipProvider",ae=700,D="tooltip.open",[ce,A]=O(re),se=e=>{const{__scopeTooltip:n,delayDuration:t=ae,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:c}=e,[i,p]=o.useState(!0),s=o.useRef(!1),d=o.useRef(0);return o.useEffect(()=>{const l=d.current;return()=>window.clearTimeout(l)},[]),o.createElement(ce,{scope:n,isOpenDelayed:i,delayDuration:t,onOpen:o.useCallback(()=>{window.clearTimeout(d.current),p(!1)},[]),onClose:o.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>p(!0),r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:o.useCallback(l=>{s.current=l},[]),disableHoverableContent:a},c)},k="Tooltip",[ie,P]=O(k),le=e=>{const{__scopeTooltip:n,children:t,open:r,defaultOpen:a=!1,onOpenChange:c,disableHoverableContent:i,delayDuration:p}=e,s=A(k,e.__scopeTooltip),d=R(n),[l,u]=o.useState(null),$=te(),f=o.useRef(0),b=i??s.disableHoverableContent,h=p??s.delayDuration,x=o.useRef(!1),[g=!1,v]=W({prop:r,defaultProp:a,onChange:M=>{M?(s.onOpen(),document.dispatchEvent(new CustomEvent(D))):s.onClose(),c==null||c(M)}}),C=o.useMemo(()=>g?x.current?"delayed-open":"instant-open":"closed",[g]),E=o.useCallback(()=>{window.clearTimeout(f.current),x.current=!1,v(!0)},[v]),w=o.useCallback(()=>{window.clearTimeout(f.current),v(!1)},[v]),L=o.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{x.current=!0,v(!0)},h)},[h,v]);return o.useEffect(()=>()=>window.clearTimeout(f.current),[]),o.createElement(X,d,o.createElement(ie,{scope:n,contentId:$,open:g,stateAttribute:C,trigger:l,onTriggerChange:u,onTriggerEnter:o.useCallback(()=>{s.isOpenDelayed?L():E()},[s.isOpenDelayed,L,E]),onTriggerLeave:o.useCallback(()=>{b?w():window.clearTimeout(f.current)},[w,b]),onOpen:E,onClose:w,disableHoverableContent:b},t))},I="TooltipTrigger",ue=o.forwardRef((e,n)=>{const{__scopeTooltip:t,...r}=e,a=P(I,t),c=A(I,t),i=R(t),p=o.useRef(null),s=N(n,p,a.onTriggerChange),d=o.useRef(!1),l=o.useRef(!1),u=o.useCallback(()=>d.current=!1,[]);return o.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),o.createElement(z,T({asChild:!0},i),o.createElement(H.button,T({"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute},r,{ref:s,onPointerMove:y(e.onPointerMove,$=>{$.pointerType!=="touch"&&!l.current&&!c.isPointerInTransitRef.current&&(a.onTriggerEnter(),l.current=!0)}),onPointerLeave:y(e.onPointerLeave,()=>{a.onTriggerLeave(),l.current=!1}),onPointerDown:y(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:y(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:y(e.onBlur,a.onClose),onClick:y(e.onClick,a.onClose)})))}),G="TooltipPortal",[pe,de]=O(G,{forceMount:void 0}),fe=e=>{const{__scopeTooltip:n,forceMount:t,children:r,container:a}=e,c=P(G,n);return o.createElement(pe,{scope:n,forceMount:t},o.createElement(S,{present:t||c.open},o.createElement(J,{asChild:!0,container:a},r)))},_="TooltipContent",$e=o.forwardRef((e,n)=>{const t=de(_,e.__scopeTooltip),{forceMount:r=t.forceMount,side:a="top",...c}=e,i=P(_,e.__scopeTooltip);return o.createElement(S,{present:r||i.open},i.disableHoverableContent?o.createElement(F,T({side:a},c,{ref:n})):o.createElement(be,T({side:a},c,{ref:n})))}),be=o.forwardRef((e,n)=>{const t=P(_,e.__scopeTooltip),r=A(_,e.__scopeTooltip),a=o.useRef(null),c=N(n,a),[i,p]=o.useState(null),{trigger:s,onClose:d}=t,l=a.current,{onPointerInTransitChange:u}=r,$=o.useCallback(()=>{p(null),u(!1)},[u]),f=o.useCallback((b,h)=>{const x=b.currentTarget,g={x:b.clientX,y:b.clientY},v=ge(g,x.getBoundingClientRect()),C=Te(g,v),E=ye(h.getBoundingClientRect()),w=Ee([...C,...E]);p(w),u(!0)},[u]);return o.useEffect(()=>()=>$(),[$]),o.useEffect(()=>{if(s&&l){const b=x=>f(x,l),h=x=>f(x,s);return s.addEventListener("pointerleave",b),l.addEventListener("pointerleave",h),()=>{s.removeEventListener("pointerleave",b),l.removeEventListener("pointerleave",h)}}},[s,l,f,$]),o.useEffect(()=>{if(i){const b=h=>{const x=h.target,g={x:h.clientX,y:h.clientY},v=(s==null?void 0:s.contains(x))||(l==null?void 0:l.contains(x)),C=!Ce(g,i);v?$():C&&($(),d())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[s,l,i,d,$]),o.createElement(F,T({},e,{ref:c}))}),[he,xe]=O(k,{isInside:!1}),F=o.forwardRef((e,n)=>{const{__scopeTooltip:t,children:r,"aria-label":a,onEscapeKeyDown:c,onPointerDownOutside:i,...p}=e,s=P(_,t),d=R(t),{onClose:l}=s;return o.useEffect(()=>(document.addEventListener(D,l),()=>document.removeEventListener(D,l)),[l]),o.useEffect(()=>{if(s.trigger){const u=$=>{const f=$.target;f!=null&&f.contains(s.trigger)&&l()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[s.trigger,l]),o.createElement(Q,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:i,onFocusOutside:u=>u.preventDefault(),onDismiss:l},o.createElement(Z,T({"data-state":s.stateAttribute},d,p,{ref:n,style:{...p.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),o.createElement(q,null,r),o.createElement(he,{scope:t,isInside:!0},o.createElement(ne,{id:s.contentId,role:"tooltip"},a||r))))}),ve="TooltipArrow",me=o.forwardRef((e,n)=>{const{__scopeTooltip:t,...r}=e,a=R(t);return xe(ve,t).isInside?null:o.createElement(ee,T({},a,r,{ref:n}))});function ge(e,n){const t=Math.abs(n.top-e.y),r=Math.abs(n.bottom-e.y),a=Math.abs(n.right-e.x),c=Math.abs(n.left-e.x);switch(Math.min(t,r,a,c)){case c:return"left";case a:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Te(e,n,t=5){const r=[];switch(n){case"top":r.push({x:e.x-t,y:e.y+t},{x:e.x+t,y:e.y+t});break;case"bottom":r.push({x:e.x-t,y:e.y-t},{x:e.x+t,y:e.y-t});break;case"left":r.push({x:e.x+t,y:e.y-t},{x:e.x+t,y:e.y+t});break;case"right":r.push({x:e.x-t,y:e.y-t},{x:e.x-t,y:e.y+t});break}return r}function ye(e){const{top:n,right:t,bottom:r,left:a}=e;return[{x:a,y:n},{x:t,y:n},{x:t,y:r},{x:a,y:r}]}function Ce(e,n){const{x:t,y:r}=e;let a=!1;for(let c=0,i=n.length-1;c<n.length;i=c++){const p=n[c].x,s=n[c].y,d=n[i].x,l=n[i].y;s>r!=l>r&&t<(d-p)*(r-s)/(l-s)+p&&(a=!a)}return a}function Ee(e){const n=e.slice();return n.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),we(n)}function we(e){if(e.length<=1)return e.slice();const n=[];for(let r=0;r<e.length;r++){const a=e[r];for(;n.length>=2;){const c=n[n.length-1],i=n[n.length-2];if((c.x-i.x)*(a.y-i.y)>=(c.y-i.y)*(a.x-i.x))n.pop();else break}n.push(a)}n.pop();const t=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;t.length>=2;){const c=t[t.length-1],i=t[t.length-2];if((c.x-i.x)*(a.y-i.y)>=(c.y-i.y)*(a.x-i.x))t.pop();else break}t.push(a)}return t.pop(),n.length===1&&t.length===1&&n[0].x===t[0].x&&n[0].y===t[0].y?n:n.concat(t)}const _e=se,Pe=le,Oe=ue,Re=fe,De=$e,Ae=me,ke=B({base:"px-2 py-1 rounded-large bg-white shadow-around",variants:{placement:{"top-start":"origin-bottom-left","top-center":"origin-bottom","top-end":"origin-bottom-right","right-start":"origin-top-left","right-center":"origin-left","right-end":"origin-bottom-left","bottom-start":"origin-top-left","bottom-center":"origin-top","bottom-end":"origin-top-right","left-start":"origin-top-right","left-center":"origin-right","left-end":"origin-top-right"}},defaultVariants:{placement:"top-center"}}),Le={open:{opacity:1,scale:1},closed:{opacity:0,scale:.8}},V=o.forwardRef((e,n)=>{const{isOpen:t,title:r,side:a="top",align:c="center",sideOffset:i=5,showArrow:p=!0,delay:s=200,children:d,className:l,onOpenChange:u}=e,[$,f]=o.useState(t),b=h=>{f(h),u==null||u(h)};return m.jsx(_e,{delayDuration:s,children:m.jsxs(Pe,{onOpenChange:b,children:[m.jsx(Oe,{asChild:!0,children:d}),m.jsx(K,{children:$?m.jsx(Re,{forceMount:!0,children:m.jsx(De,{ref:n,className:"outline-0",side:a,align:c,sideOffset:i,children:m.jsxs(U.div,{initial:"closed",animate:$?"open":"closed",exit:"closed",variants:Le,className:ke({placement:`${a}-${c}`,class:l}),children:[o.isValidElement(r)?r:r?m.jsx("div",{children:r}):null,p?m.jsx(Ae,{className:"fill-white"}):null]})})}):null})]})})});V.displayName="Tooltip";const Fe=V;export{Fe as T};
